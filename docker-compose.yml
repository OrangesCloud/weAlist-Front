version: '3.8'

services:
  frontend-dev:
    # 로컬 개발에 필요한 환경을 위해 node 이미지를 직접 사용하거나,
    # 개발용 Dockerfile(dev-dockerfile)을 분리하여 사용합니다.
    # 여기서는 호스트 환경과 유사하게 실행하는 방식을 채택합니다.
    image: node:20-alpine

    # 💡 핫 리로딩을 위해 로컬 소스 코드를 컨테이너의 /app에 마운트
    volumes:
      - ./:/app
      - /app/node_modules # 호스트의 node_modules는 무시 (컨테이너 내부 종속성 보존)

    working_dir: /app

    # 로컬 개발 서버 실행 명령 (Vite dev server)
    command: pnpm run dev

    # 포트 매핑: 호스트:컨테이너
    ports:
      - '3000:3000'

    # 💡 개발용 API 엔드포인트를 로컬에서 설정
    environment:
      - .env
    networks:
      - wealist-net
networks:
  wealist-net:
    external: true # 외부에서 생성된 네트워크를 사용하도록 지정
