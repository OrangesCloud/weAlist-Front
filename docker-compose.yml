services:
  frontend-dev:
    # 1. pnpm ì„¤ì¹˜ë¥¼ ìœ„í•´ ìƒì„±í•œ ê°œë°œìš© Dockerfile.dev ì°¸ì¡°
    build:
      context: .
      dockerfile: Dockerfile.dev
    # 2. ë¡œì»¬ .env íŒŒì¼ì˜ ë³€ìˆ˜ë“¤ì„ ì»¨í…Œì´ë„ˆì— ì£¼ì…
    env_file:
      - .env # ğŸ’¡ env_fileì„ ì‚¬ìš©í•˜ì—¬ .env íŒŒì¼ ì°¸ì¡°

    # ğŸ’¡ í•« ë¦¬ë¡œë”©ì„ ìœ„í•´ ë¡œì»¬ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì»¨í…Œì´ë„ˆì˜ /appì— ë§ˆìš´íŠ¸
    volumes:
      - ./:/app
      - /app/node_modules # í˜¸ìŠ¤íŠ¸ì˜ node_modulesëŠ” ë¬´ì‹œ (ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì¢…ì†ì„± ë³´ì¡´)

    working_dir: /app

    # ë¡œì»¬ ê°œë°œ ì„œë²„ ì‹¤í–‰ ëª…ë ¹ (Vite dev server)
    command: sh -c "pnpm install --frozen-lockfile --ignore-scripts && pnpm run dev -- --host 0.0.0.0 --port 3000"
    # í¬íŠ¸ ë§¤í•‘: í˜¸ìŠ¤íŠ¸:ì»¨í…Œì´ë„ˆ
    ports:
      - '3000:3000'

    # ë°±ì—”ë“œì™€ í†µì‹ ì„ ìœ„í•œ ê³µí†µ ë„¤íŠ¸ì›Œí¬ ì—°ê²°
    networks:
      - wealist-net
networks:
  wealist-net:
    external: true # ì™¸ë¶€ì—ì„œ ìƒì„±ëœ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì§€ì •
